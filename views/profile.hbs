<div class="container" id="profile_conteiner">
  <div class="row" id="profile_bg">

    {{!-- //Imagen profile --}}
    <div class="col s6">
      <img id=profile_pic src="{{user.photoProfileURL}}" alt="profile imagen">
    </div>

    {{!-- About Me --}}
    <div class="row">
      <div class="col s12 m6">
        <div class="card grey" id="card_aboutme">
          <div class="card-content white-text">
            <h3>{{user.username}}</h3>
            <h4>Soul affinity: {{user.role}} </h4>
            <span class="card-title">About Me</span>
            <p>{{user.description}}</p>
          </div>
          <button>Edit Profile</button>
          <button class="right" id="follow_btn">Follow Me</button>
        </div>
      </div>

    </div>
  </div>
  {{!-- segmento de Skills-tags --}}
  <div class="conteiner" id="espacio_tags">
    <div class="row" class="col s12">
      <h3> My Skills</h3>
    </div>
  </div>
  {{!-- Conteiner para event & projects segmentos paralelos --}}
  <div class="conteiner">
    <div class="row" id="cont_ev_y_pro">
      {{!-- Events profile --}}
      <div class="col s6 ">
        <h3> Your Latest Event</h3>
        <!-- Modal Trigger -->
        <a class="waves-effect waves-light btn orange modal-trigger" href="#create-event">Create Event</a>
        {{#each events as |event|}}
        <div class="row">
          <div class="col s12 m6">
            <div class="card blue-grey darken-1">
              <div class="card-content white-text">
                <span class="card-title"> {{event.title}} </span>
                <p>{{event.description}}</p>
              </div>
              <div class="card-action">
                <a class="waves-effect waves-light modal-trigger" href="/event/{{event._id}}/edit">edit</a>
                <a href="/event/{{event._id}}/delete">Delete</a>
              </div>
            </div>
          </div>
        </div>
        {{/each}}
      </div>
      {{! -- Projects --}}
      <div class="row" id="cont_pro">
        <div class="col s6 ">
          <h3> Your Latest Proyect</h3>
          <!-- Modal Trigger Project -->
          <a class="waves-effect waves-light btn orange modal-trigger" href="#newproject">New Project</a>
          {{#each projects as |project|}}
          <div class="row">
            <div class="col s12 m6">
              <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                  <span class="card-title"> {{project.title}} </span>
                  <p>{{project.description}}</p>
                </div>
                <div class="card-action">
                  <a class="waves-effect waves-light modal-trigger" href="/project/{{project._id}}/edit">edit</a>
                  <a href="/project/{{project._id}}/delete">Delete</a>
                </div>
              </div>
            </div>  
          </div>
          {{/each}}
        </div>
        </div>
      </div>
    </div>
  </div> {{!-- fin container  event & projects   --}}
  {{!-- Conteiner para posts & follows segmentos paralelos --}}
  <div class="conteiner">
    <div class="row" id="cont_post_y_foll">
      {{! -- Followers --}}
      <div class="row">
        <div class="col s6 " id="cont_following">
          <h3> Followers</h3>
        </div>
        {{! -- Following --}}
        <div class="col s6 " id="cont_followers">
          <h3>Following</h3>
        </div>
      </div>
    </div>
  </div> {{!-- fin container  follow & following   --}}

  <!-- Modal Structure -->
  {{!-- New Project --}}
  <div class="modal" id="newproject">
    <div class="modal-content">
      <h3>Create a new awesome project</h3>
      <div class="row">
        <br>
          <form class="col s12" method="POST" action="/project/create">
            <div class="row">
              <div class="input-field col s12">
                <input id="title" type="text" name="title">
                <label for="title">Project Name</label>
              </div>
              <div class="input-field col s12">
                <input id="description" type="text" name="description">
                <label for="description">Project Description</label>
              </div>
              <div class="input-field col s12">
                <input id="status_project" type="text" name="status_project">
                <label for="status_project">Project Status</label>
              </div>
              <div class="input-field col s12">
                <input id="req_skills" type="text" name="req_skills">
                <label for="req_skills">Skills required for the project</label>
              </div>
              <div class="input-field col s12">
                <input id="ending_date" type="date" name="ending_date">
                <label for="ending_date">Estimated project ending date</label>
              </div>
              <div class="input-field col s12">
                <input id="external_link" type="url" name="external_link">
                <label for="external_link">External project link</label>
              </div>
            </div>
            <button class="btn waves-effect waves-light red" type="submit">Create
              <i class="material-icons right">send</i>
            </button>
          </form>
      </div>
    </div>
  </div>
  </div>

  {{!-- New Post --}}
  {{!-- <div class="modal" id="newpost">
    <div class="modal-content">
      <h3>Create a brand new post</h3>
      <div class="row">
        <br>
        <form class="col s12" method="POST" action="/post/create">
          <div class="row">
            <div class="input-field col s12">
              <input id="title" type="text" name="title">
              <label for="title">Post Title</label>
            </div>
            <div class="input-field col s12">
              <input id="description" type="text" name="description">
              <label for="description">Post Description</label>
            </div>
            <div class="col s12">
              <form action="/new/create" method="POST" enctype="multipart/form-data">
                <div>
                  <label for="photo"></label>
                  <input type="file" name="photo" id="photo" accept="image/*">
                </div>
              </form>
            </div>
          </div>
          <button class="btn waves-effect waves-light red" type="submit">Create
            <i class="material-icons right">send</i>
          </button>
        </form>
      </div>
    </div>
  </div>
  </div> --}}
  {{!-- Create Event --}}
  <div class="modal" id="create-event">
    <div class="modal-content">
      <h1>Create</h1>
      <form action="/event/create" method="POST">
        <label for="name">Event Title</label>
        <input type="text" name="title">
        <label for="name">Event Description</label>
        <input type="text" name="description">
        <label for="location">Location</label>
        <input id="lng" type="text" name="location[coordinates][0]" placeholder="longitud" hidden>
        <input id="lat" type="text" name="location[coordinates][1]" placeholder="latitud" hidden>
        <label for="address">Address</label>
        <input id="address" type="text" name="location.address" placeholder="address" hidden>
        <select name="placeType" id="">
          <option value="coffee shop">coffee shop</option>
          <option value="bookstore">bookstore</option>
        </select>
        <div id='map'></div>
        <input type="submit" label="submit">
      </form>

    </div>
  </div>

  <script>
    mapboxgl.accessToken = 'pk.eyJ1IjoiZGl1cml2aiIsImEiOiJjanAxdjA2cTQwMGp1M2tvYzZmZGp3bWc3In0.4cZEyLkU2ikqx_wb4A1z8A';
    const map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/mapbox/streets-v11',
      center: [-99.160397, 19.408481],
      zoom: 15
    });
    const geoCoder = new MapboxGeocoder({
      accessToken: mapboxgl.accessToken
    })
    map.addControl(geoCoder)
    geoCoder.on('results', (results) => {
      document.querySelector('#address').value = results.features[0].place_name
      document.querySelector('#lat').value = results.features[0].center[1];
      document.querySelector('#lng').value = results.features[0].center[0];
    });
  </script>

  {{!-- Event New Project --}}
  <div class="modal" id="newproject">
    <div class="modal-content">
      <h3>Create a new awesomem project</h3>
      <div class="row">
        <br>
        <form class="col s12" method="POST" action="/event/create">
          <div class="row">
            <div class="input-field col s12">
              <input id="title" type="text" name="title">
              <label for="title">Project Name</label>
            </div>
            <div class="input-field col s12">
              <input id="description" type="text" name="description">
              <label for="description">Project Description</label>
            </div>
            {{!-- combo selector --}}
            <div class="input-field col s12">
              <select name="Project Status">
                <option value="" disabled selected>Status of the project :</option>
                <option value="Starting Adventure">Starting Adventure</option>
                <option value="halfway through">halfway through</option>
                <option value="Advance stage">Advance stage</option>
                <option value="Almost ready">Almost ready</option>
              </select>
              <label>status</label>
            </div>

            {{!-- Talents --}}
            <div class="input-field col s12">
              <input id="people_needed" type="text" name="people_needed">
              <label for="people_needed">Talents for the project</label>
            </div>
            {{!-- chips --}}
            <div class="row">
              <div class="chips-m col s12"></div>
            </div>

            <div class="input-field col s12">
              <input id="ending_date" type="date" name="ending_date">
              <label for="ending_date">Project ending date</label>
            </div>
            <div class="input-field col s12">
              <input id="external_link" type="url" name="external_link">
              <label for="external_link">External link</label>
            </div>
          </div>
          <button class="btn waves-effect waves-light red" type="submit">Create
            <i class="material-icons right">send</i>
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
 --}}

{{!-- <script>
  mapboxgl.accessToken = 'pk.eyJ1Ijoiam9zZWNhem9ybGEiLCJhIjoiY2szNjI3M2tkMDdjdjNocXA2bTl4ZThvdiJ9.Z4j_rPWQgMRpRRFW6na_ug';
  var map = new mapboxgl.Map({
  container: 'map-edit',
  style: "mapbox://styles/mapbox/streets-v11",
  center: [0, 0],
  zoom: 1.5
  });
  var geocoder = new MapboxGeocoder({ 
    accessToken: mapboxgl.accessToken, 
    mapboxgl: mapboxgl, 
    marker: true, 
  });
  map.addControl(geocoder);
  geoCoder.on('results', (results) => {
    console.log(document.querySelector('#address-edit').value )
    document.querySelector('#address-edit').value = results.features[0].place_name
    document.querySelector('#lat-edit').value = results.features[0].center[1];
    document.querySelector('#lng-edit').value = results.features[0].center[0];
  });
</script> --}}

<script>
  document.addEventListener('DOMContentLoaded', function () {
    let elements = document.querySelectorAll('.modal');
    let ins = M.Modal.init(elements);
    var elems = document.querySelectorAll('select');
    var instances = M.FormSelect.init(elems, {});

  });

  var elems = document.querySelectorAll('select');
  var instances = M.FormSelect.init(elems, {});
  //para las chips
  var elems = document.querySelectorAll('.chips-m');
  var instances = M.Chips.init(elems, {
    data: [],
    limit: 20,
    onChipAdd: () => {

    },
    placeholder: "Add your skills",
    secondaryPlaceholder: "skill",
    autocompleteOptions: {
      data: {
        'javascript': null,
        'javier': null,
      },
      limit: Infinity,
      minLength: 1
    }
  });


</script>

<script>
  document.querySelector('input[name="photoURL"]').addEventListener('change', (e) => {
    document.querySelector('label.custom-file-label span').innerText = e.target.files[0].name
  });
</script>